{% load static i18n thumbnail aircox %}
{% comment %}
Context:
- cover: image cover
- site: current website
- has_filters: display filter bar (using block "filters")
{% endcomment %}
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="application-name" content="aircox" />
        <meta name="description" content="{{ site.description }}" />
        <meta name="keywords" content="{{ site.tags }}" />
        <meta name="generator" content="Aircox" />
        <link rel="icon" href="{% thumbnail site.favicon 32x32 crop %}" />

        {% block assets %}
        <link rel="stylesheet" type="text/css" href="{% static "aircox/vendor.css" %}"/>
        <link rel="stylesheet" type="text/css" href="{% static "aircox/main.css" %}"/>
        <script src="{% static "aircox/vendor.js" %}"></script>
        <script src="{% static "aircox/main.js" %}"></script>
        {% endblock %}

        <title>
            {% block head_title %}{{ station.name }}{% endblock %}
        </title>

        {% block head_extra %}{% endblock %}
    </head>
    <body>
        <div id="app">
            <nav class="navbar has-shadow" role="navigation" aria-label="main navigation">
                <div class="container">
                    <div class="navbar-brand">
                        <a href="/" title="{% trans "Home" %}" class="navbar-item">
                            <img src="{{ station.logo.url }}" class="logo"/>
                        </a>
                    </div>
                    <div class="navbar-menu">
                        <div class="navbar-start">
                            {% block top-nav %}
                            {% nav_items "top" css_class="navbar-item" active_class="is-active" as items %}
                            {% for item, render in items %}
                            {{ render }}
                            {% endfor %}
                            {% endblock %}
                        </div>
                    </div>
                </div>
            </nav>

            <div class="container">
                <div class="columns is-desktop">
                    <main class="column page">
                        <header class="header">
                            {% block header %}
                            <h1 class="title is-1">{% block title %}{% endblock %}</h1>

                            <h3 class="subtitle is-3">
                                {% block subtitle %}{% endblock %}
                            </h3>

                            <div class="columns is-size-4">
                            {% block header_meta %}
                            {% if parent %}
                            <a href="{{ parent.get_absolute_url }}" class="column">
                                &#10092; {{ parent.title }}</a></li>
                            {% endif %}
                            {% endblock %}
                            </div>

                            {% endblock %}
                        </header>

                        {% if has_filters %}
                        <nav class="navbar filters"
                            aria-label="{% trans "list filters" %}">
                        {% block filters %}{% endblock %}
                        </nav>
                        {% endif %}

                        {% block main %}{% endblock main %}
                    </main>

                    {% if has_sidebar %}
                    <aside class="column is-one-third-desktop">
                        {# FIXME: block cover into sidebar one #}
                        {% block cover %}
                        {% if cover is not None %}
                        <img class="cover" src="{{ cover.url }}" class="cover"/>
                        {% endif %}
                        {% endblock %}

                        {% block sidebar %}
                        {% if sidebar_items %} 
                        <section>
                            <h4 class="title is-4">
                                {% block sidebar_title %}{% trans "Recently" %}{% endblock %}
                            </h4>

                        {% for object in sidebar_items %}
                        {% include "aircox/episode_item.html" %}
                        {% endfor %}

                        <br>
                        <nav class="pagination is-centered">
                            <ul class="pagination-list">
                                <li>
                                    <a {% if parent %}href="{% url "page-list" parent_slug=parent.slug %}"{% else %}href="{% url "page-list" %}"{% endif %}
                                        class="pagination-link"
                                        aria-label="{% trans "Show all program's diffusions" %}">
                                        {% trans "Show more" %}
                                    </a>
                                </li>
                            </ul>
                        </nav>
                        {% endif %}
                        </section>
                        {% endblock %}
                    </aside>
                    {% endif %}
                </div>
            </div>

            <hr>
            {% include "aircox/player.html" %}
        </div>
    </body>
</html>


