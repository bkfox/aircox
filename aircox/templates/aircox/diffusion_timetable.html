{% extends "aircox/page.html" %}
{% load i18n aircox %}

{% block title %}{% trans "Timetable" %}{% endblock %}

{% block main %}
{{ block.super }}

<section class="section">
    <h3 class="subtitle size-3">
        {% blocktrans %}From <b>{{ start }}</b> to <b>{{ end }}</b>{% endblocktrans %}
    </h3>

    {% unique_id "timetable" as timetable_id %}
    <a-tabs default="{{ date }}">
        <template v-slot:tabs="scope" noscript="hidden">
            <li><a href="{% url "timetable" date=prev_date %}">&lt;</a></li>

            {% for day in by_date.keys %}
            <a-tab value="{{ day }}">
                <a href="{% url "timetable" date=day %}">
                    {{ day|date:"D. d" }}
                </a>
            </a-tab>
            {% endfor %}

            <li>
                <a href="{% url "timetable" date=next_date %}">&gt;</a>
            </li>
        </template>

        {% with True as hide_schedule %}
        <template v-slot:default="{value}">
            {% for day, diffusions in by_date.items %}
            <noscript><h4 class="subtitle is-4">{{ day|date:"l d F Y" }}</h4></noscript>
            <div id="{{timetable_id}}-{{ day|date:"Y-m-d" }}" v-if="value == '{{ day }}'">
                {% for diffusion in diffusions %}
                <div class="columns">
                    <div class="column is-one-fifth has-text-right">
                        <time datetime="{{ diffusion.start|date:"c" }}">
                        {{ diffusion.start|date:"H:i" }} - {{ diffusion.end|date:"H:i" }}
                        </time>
                    </div>
                    <div class="column">
                        {% with diffusion.episode as object %}
                        {% include "aircox/episode_item.html" %}
                        {% endwith %}
                    </div>
                </div>
                {% endfor %}
            </div>
            {% endfor %}
        </template>
        {% endwith %}
    </a-tabs>
</section>
{% endblock %}

