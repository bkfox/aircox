{% extends "cms/publication.html" %}
{# generic page to display programs #}

{% load i18n %}
{% load wagtailcore_tags %}

{# TODO message if program is no more active #}

{% block content_extras %}
<div class="schedule">
{% if page.program.active %}
    <h2>{% trans "Schedule" %}</h2>
    <ul>
        {% for schedule in page.program.schedule_set.all %}
        <li>
            {% with frequency=schedule.get_frequency_display day=schedule.date|date:'l' %}
            {% with start=schedule.date|date:"H:i" end=schedule.end|date:"H:i" %}
            {% blocktrans %}
                {{ day }} {{ start }} until {{ end }}, {{ frequency }}
            {% endblocktrans %}
            {% endwith %}
            {% endwith %}
            {% if schedule.initial %}
            <span class="info">{% trans "Rerun" %}</span>
            {% endif %}
        </li>
        {% endfor %}
    </ul>
{% else %}
    <div class="warning">{% trans "This program is no longer active" %}</div>
{% endif %}
</div>
{% endblock %}

{% block page_nav_extras %}
{% if page.program.active %}
{% with object_list=page.next_diffs %}
{% if object_list %}
<div>
    <h2>{% trans "Next Diffusions" %}</h2>
    {% include "cms/list.html" %}
</div>
{% endif %}
{% endwith %}
{% endif %}{# program.active #}

{% with object_list=page.prev_diffs %}
{% if object_list %}
<div>
    <h2>{% trans "Previous Diffusions" %}</h2>
    {% include "cms/list.html" %}
</div>
{% endif %}
{% endwith %}



{% endblock %}


