{% extends 'cms/sections/section_item.html' %}

{% load staticfiles %}
{% load i18n %}


{% block content %}
<style>



</style>
<div id="player" class="player">
    <audio preload="metadata">
        {% trans "Your browser does not support the <code>audio</code> element." %}
        {% for stream in streams %}
        <source src="{{ stream }}" />
        {% endfor %}
    </audio>

    <div class="controls flex_row">
        <progress class="flex_item" value="0" max="1"></progress>
        <span class="info duration"></span>

        <input type="checkbox" class="single" id="player_single_mode">
        <label for="player_single_mode" class="info" title="{% trans "single mode" %}">↻</label>
    </div>

    <div class="playlist">
        <li class='item list_item flex_row' style="display: none;">
            <div class="button">
                <img src="{% static "cms/images/play.png" %}" class="play"
                    title="{% trans "play" %}" />
                <img src="{% static "cms/images/pause.png" %}" class="pause"
                    title="{% trans "pause" %}" />
                <img src="{% static "cms/images/loading.png" %}" class="loading"
                    title="{% trans "loading..." %}" />
            </div>

            <h3 class="title flex_item">{{ self.live_title }}</h3>
            <div class="actions">
                <a class="action detail" title="{% trans "more informations" %}">➔</a>
                <a class="action remove" title="{% trans "remove this sound" %}">✖</a>
            </div>
            <span class="info duration"></span>
        </li>
    </div>
</div>

<script>
var player = new Player('player');
var sound = player.playlist.add(new Sound('{{ self.live_title }}', '', undefined,
    streams=[
        {% for stream in streams %}'{{ stream }}',{% endfor %}
    ]), on_air_url = '{% url 'controllers.on_air' %}');
player.select(sound, false);

</script>
{% endblock %}



